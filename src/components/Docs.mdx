import {
  Meta,
  Canvas,
  Story,
  ArgTypes,
  Description,
} from "@storybook/addon-docs/blocks";
import { Example } from "../../.storybook/blocks/Example";
import * as ListStories from "./list.stories";

<hgroup>

# @form-atoms/list-atom

The Jotai `form-atoms` extension to render performant lists with easy controls.

<nav>
  <ul>
    <li>
      <a
        aria-label="GitHub Stars"
        href="https://github.com/form-atoms/list-atom"
      >
        <img
          alt="GitHub Stars"
          src="https://img.shields.io/github/stars/form-atoms/list-atom?style=for-the-badge&labelColor=202632&logo=github"
        />
      </a>
    </li>
    <li>
      <a
        aria-label="Minzipped size"
        href="https://bundlephobia.com/result?p=%40form-atoms/list-atom"
      >
        <img
          alt="Bundlephobia"
          src="https://img.shields.io/bundlephobia/minzip/%40form-atoms/list-atom?style=for-the-badge&labelColor=202632"
        />
      </a>
    </li>
    <li>
      <a
        aria-label="NPM version"
        href="https://www.npmjs.com/package/%40form-atoms/list-atom"
      >
        <img
          alt="NPM Version"
          src="https://img.shields.io/npm/v/%40form-atoms/list-atom?style=for-the-badge&labelColor=202632"
        />
      </a>
    </li>
    <li>
      <a
        aria-label="Code coverage report"
        href="https://codecov.io/gh/form-atoms/list-atom"
      >
        <img
          alt="Code coverage"
          src="https://img.shields.io/codecov/c/gh/form-atoms/list-atom?style=for-the-badge&labelColor=202632"
        />
      </a>
    </li>
  </ul>
</nav>

</hgroup>

## Features

- 🏎️ **Performant rendering**. Each list item is rendered with a stable `key` derived from Jotai atom.
- 🎮 **Easy controls**. The `<List.Item>` provides `add`, `remove`, `moveUp` and `moveDown` actions for each item.
- 🧩 **Compound JSX Components**. Use the `<List.Add />`, or `<List.Empty />` instead of manual hooks.
- 🔑 **Scoped field `name`s**. The fields are dynamically indexed enabling serialization to `FormData`.
- 🐢 **Lists all the way down**. Render lists <sup>within lists <sup>within lists...</sup></sup> with the `<List.Nested>` alias `<ListOf>`.

<Example of={ListStories.QuickStartExample}>

```tsx
import { InputField, fieldAtom } from "form-atoms";
import { listAtom, createList } from "@form-atoms/list-atom";

const envVars = listAtom({
  name: "envVars",
  fields: () => ({
    variable: fieldAtom({ name: "variable", value: "" }),
    value: fieldAtom({ name: "value", value: "" }),
  }),
});

const { List } = createList(envVars);

const Example = () => (
  <List
    initialValue={[
      { variable: "PACKAGE_NAME", value: "form-atoms" },
      { variable: "APP_URL", value: "https://jotai.org" },
    ]}
  >
    <List.Item>
      {({ fields, remove }) => (
        <div
          style={{
            display: "grid",
            gridGap: 16,
            gridTemplateColumns: "auto auto min-content",
          }}
        >
          <InputField
            atom={fields.variable}
            render={(props) => <input {...props} placeholder="Variable Name" />}
          />
          <InputField
            atom={fields.value}
            render={(props) => (
              <input {...props} placeholder="Variable Value" />
            )}
          />
          <button type="button" className="outline secondary" onClick={remove}>
            Remove
          </button>
        </div>
      )}
    </List.Item>
    <List.Add>
      {({ add }) => (
        <button type="button" className="outline" onClick={() => add()}>
          Add variable
        </button>
      )}
    </List.Add>
  </List>
);
```

</Example>
