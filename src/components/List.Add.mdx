import { Example } from "../../.storybook/blocks/Example";
import * as AddStories from "./add.stories";

<hgroup>

<p className="category">Components</p>

# List.Add

The `List.Add` provides an `add()` action as a children prop. It enables appending empty or initialized item by utilizing the `useListActions()`.

</hgroup>

## Usage

```tsx
import { createList } from "@form-atoms/list-atom";

const { List } = createList(myAtom);

function CustomAddButton() {
  return (
    <List.Add>
      {({ add }) => <button onClick={() => add()}>New item</button>}
    </List.Add>
  );
}
```

## Props

| Name     | Type                                | Description   | Default                                                                                                         |
| -------- | ----------------------------------- | ------------- | --------------------------------------------------------------------------------------------------------------- |
| children | `(props: AddChildrenProps) => void` | A render prop | <code>`({add}) => <button type="button" onClick={() => add()}>`<br/>&nbsp;&nbsp;Add item<br/>`</button>`</code> |

## Children Props

| Name | Type                                        | Description                                                                                  |
| ---- | ------------------------------------------- | -------------------------------------------------------------------------------------------- |
| add  | `(value?: FormFieldValues<Fields>) => void` | An action to append a new item to the end of the list. Optionaly set the items initial value |

## Examples

<Example of={AddStories.EmptyOrInitialValue} >

```tsx
import { fieldAtom, InputField } from "form-atoms";
import { listAtom, createlist } from "@form-atoms/list-atom";

const productPros = listAtom({
  fields: () => ({ feature: fieldAtom({ value: "" }) }),
});

const { List } = createList(productPros);

const Example = () => (
  <List
    initialValue={[
      { feature: "quality materials used" },
      { feature: "not so heavy" },
    ]}
  >
    <List.Item>
      {({ fields, remove }) => (
        <fieldset role="group">
          <InputField atom={fields.feature} component="input" />
          <button type="button" className="outline secondary" onClick={remove}>
            Remove
          </button>
        </fieldset>
      )}
    </List.Item>
    <div className="grid">
      <List.Add />
      <div />
      <List.Add>
        {({ add }) => (
          <button
            type="button"
            className="secondary"
            onClick={() => add({ feature: "beautiful colors" })}
          >
            Add initialized item
          </button>
        )}
      </List.Add>
    </div>
  </List>
);
```

</Example>

<Example of={AddStories.PositioningAddButton} >

```tsx
import { fieldAtom, InputField } from "form-atoms";
import { listAtom, createlist } from "@form-atoms/list-atom";

const atom = listAtom({
  fields: () => ({ feature: fieldAtom({ value: "" }) }),
});

const { List } = createList(atom);

const Example = () => {
  return (
    <>
      <List.Empty>
        <article style={{ textAlign: "center" }}>
          <h5>You don't have any items in your list.</h5>
          <p>Start by adding your first one.</p>
          <List.Add>
            {({ add }) => (
              <button className="outline" onClick={() => add()}>
                Add first
              </button>
            )}
          </List.Add>
        </article>
      </List.Empty>
      <List.Item>
        {({ fields, index, count, remove, add }) => (
          <div
            style={{
              display: "grid",
              gridGap: 16,
              gridTemplateColumns: "auto min-content min-content",
            }}
          >
            <InputField atom={fields.feature} component="input" />
            <div style={{ width: 300 }}>
              {index + 1 === count && (
                <fieldset role="group">
                  <button className="outline" onClick={() => add()}>
                    Add
                  </button>
                  <RemoveButton remove={remove} />
                </fieldset>
              )}
            </div>
          </div>
        )}
      </List.Item>
    </>
  );
};
```

</Example>
